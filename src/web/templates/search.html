{% extends "base.html" %}

{% block title %}Search Results - Facebook Data{% endblock %}

{% block content %}
<div class="breadcrumb">
    <a href="/">ğŸ  Home</a> / Search Results
</div>

{% if query %}
<div class="card">
    <h2>ğŸ” Search Results for "{{ query }}"</h2>
    
    {% if results %}
    <div class="stats">
        <div class="stat">
            <div class="stat-value">{{ results|length }}</div>
            <div class="stat-label">Results Found</div>
        </div>
    </div>
    {% endif %}
</div>

{% if results %}
<div class="search-results">
    {% for result in results %}
    <div class="search-result">
        <div class="result-path">{{ result.path }}</div>
        <div class="result-name">
            {% if result.type == 'content' %}
                <a href="/file/{{ result.path }}">ğŸ“‹ {{ result.name }}</a>
            {% else %}
                <a href="/file/{{ result.path }}">ğŸ“ {{ result.name }}</a>
            {% endif %}
        </div>
        <div class="result-meta">
            {% if result.match == 'filename' %}
                ğŸ·ï¸ Filename match
            {% elif result.match == 'content' %}
                ğŸ“„ Content match
            {% endif %}
            â€¢ {{ result.size }}
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="card">
    <h2>ğŸ˜” No Results Found</h2>
    <p>No files or content matched your search query "<strong>{{ query }}</strong>".</p>
    <p>Try searching for:</p>
    <ul style="margin: 10px 0; padding-left: 20px;">
        <li>File names (e.g., "messages", "posts", "friends")</li>
        <li>Content within JSON files</li>
        <li>Specific terms from your Facebook data</li>
    </ul>
</div>
{% endif %}

{% else %}
<div class="card">
    <h2>ğŸ” Search Your Facebook Data</h2>
    <p>Use the search box above to find specific files or content within your Facebook data export.</p>
    
    <h3>Search Tips:</h3>
    <ul style="margin: 10px 0; padding-left: 20px;">
        <li><strong>File names:</strong> Search for specific file types like "messages", "posts", or "friends"</li>
        <li><strong>Content:</strong> Search for specific text within JSON files (limited to files under 100KB)</li>
        <li><strong>Categories:</strong> Try searching for broad categories like "activity", "personal", or "security"</li>
    </ul>
    
    <h3>Common Searches:</h3>
    <div style="margin: 15px 0;">
        <a href="/search?q=messages" style="margin-right: 10px;">ğŸ’¬ Messages</a>
        <a href="/search?q=posts" style="margin-right: 10px;">ğŸ“ Posts</a>
        <a href="/search?q=friends" style="margin-right: 10px;">ğŸ‘¥ Friends</a>
        <a href="/search?q=photos" style="margin-right: 10px;">ğŸ“¸ Photos</a>
        <a href="/search?q=ads" style="margin-right: 10px;">ğŸ“¢ Ads</a>
    </div>
</div>
{% endif %}

<a href="/" class="back-link">â† Back to Overview</a>
{% endblock %}
